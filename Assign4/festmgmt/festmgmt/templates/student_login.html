<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Dashboard</title>
</head>
<body>
    <div style="float: right; margin-right: 20px;">
        <form action="{% url 'logout' %}" method="post">
            {% csrf_token %}
            <button type="submit">Logout</button>
        </form>
    </div>
    
    <h1>Welcome, {{ user.username }}!</h1>

    <h2>Upcoming Events</h2>
        {% if events %}
            <ul>
                {% for event in events %}
                <li>
                    <h2>{{ event.event_name }}</h2>
                    <!-- Other event details -->
                    <strong>Type:</strong> {{ event.event_type }}<br>
                    <strong>Description:</strong> {{ event.event_description }}<br>
                    <strong>Time Slot:</strong> 
                    {% if event.time_slot_id %}
                        {{ event.time_slot_id.date }} <br>
                    {% else %}
                        None<br>
                    {% endif %}
                    <strong>Venue:</strong> 
                    {% if event.venue_name %}
                        {{ event.venue_name.venue_name }}<br>
                    {% else %}
                        None<br>
                    {% endif %}
                    <!-- Add buttons for volunteering, organizing, participating here -->
                    {% if event.event_id not in volunteered_for_events and event.event_id not in participated_for_events %}
                        <form action="{% url 'volunteer_event' event.event_id %}" method="post">
                            {% csrf_token %}
                            <button type="submit">Volunteer</button>
                        </form>
                        <form action="{% url 'participate_student_event' event.event_id %}" method="post">
                            {% csrf_token %}
                            <button type="submit">Participate</button>
                        </form>
                    {% else %}
                        {% if event.event_id in participated_for_events %}
                            <p>Participated</p>
                        {% endif %}

                        {% if event.event_id in volunteered_for_events %}
                            <p>Volunteered</p>
                        {% endif %}
                    {% endif %}

                </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>No events available.</p>
        {% endif %}
    </ul>
</body>
</html>
